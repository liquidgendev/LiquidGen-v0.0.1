<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>LiquidGen — Demo (static)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>html,body,#root{height:100%}</style>
  </head>
  <body class="antialiased bg-gradient-to-b from-sky-50 via-emerald-50 to-white p-6">
    <div id="root" class="max-w-6xl mx-auto">
      <header class="flex items-center justify-between py-8">
        <div>
          <h1 class="text-4xl font-extrabold text-slate-900">LiquidGen</h1>
          <p class="mt-1 text-slate-600">Turn LP yield into buybacks for new launches — static demo</p>
        </div>
        <div class="flex gap-3">
          <button class="px-4 py-2 bg-sky-600 text-white rounded-lg">Connect Wallet</button>
          <button class="px-4 py-2 border rounded-lg">Docs</button>
        </div>
      </header>

      <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">
        <section class="lg:col-span-2 rounded-2xl p-8 bg-white/60 border border-slate-100 shadow">
          <h2 class="text-2xl font-bold">Live calculator (static)</h2>
          <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="p-4 rounded-lg bg-white border">
              <label class="block text-sm font-medium text-slate-700">Total locked (USD)</label>
              <input id="lockedValue" type="number" value="10000000" class="mt-2 w-full rounded-md border p-2" />

              <label class="block text-sm font-medium text-slate-700 mt-3">Average APR (%)</label>
              <input id="apr" type="number" value="20" class="mt-2 w-full rounded-md border p-2" />

              <label class="block text-sm font-medium text-slate-700 mt-3">Buybacks / month</label>
              <input id="buybacksPerMonth" type="number" value="15" class="mt-2 w-full rounded-md border p-2" />

              <label class="block text-sm font-medium text-slate-700 mt-3">Buyback allocation (%)</label>
              <input id="buybackAllocationPct" type="range" min="0" max="1" step="0.01" value="0.9" class="mt-2 w-full" />
              <div id="buybackAllocLabel" class="text-sm text-slate-600">90%</div>

              <label class="block text-sm font-medium text-slate-700 mt-3">Platform fee (%)</label>
              <input id="platformFeePct" type="range" min="0" max="0.1" step="0.001" value="0.02" class="mt-2 w-full" />
              <div id="platformFeeLabel" class="text-sm text-slate-600">2.00%</div>
            </div>

            <div class="p-4 rounded-lg bg-white border">
              <h5 class="font-semibold">Vote allocation (A / B / C)</h5>
              <div class="mt-3 grid grid-cols-3 gap-2">
                <input id="allocA" type="number" value="60" class="rounded-md border p-2" />
                <input id="allocB" type="number" value="30" class="rounded-md border p-2" />
                <input id="allocC" type="number" value="10" class="rounded-md border p-2" />
              </div>

              <div class="mt-4">
                <h6 class="font-medium">Results</h6>
                <div id="results" class="mt-2 text-sm text-slate-700"></div>
                <div class="mt-4 flex gap-3">
                  <button id="copyBtn" class="px-4 py-2 bg-emerald-600 text-white rounded">Copy summary</button>
                  <button onclick="window.print()" class="px-4 py-2 border rounded">Print</button>
                </div>
              </div>
            </div>
          </div>

          <div class="mt-6">
            <h6 class="font-medium">Simulated buyback schedule (30 days)</h6>
            <div id="chartWrap" class="mt-3 h-56 bg-white/80 p-3 rounded border border-slate-100"></div>
          </div>
        </section>

        <aside class="rounded-2xl p-6 bg-white/60 border border-slate-100 shadow">
          <div class="text-sm text-slate-600">Quick overview</div>
          <div id="quickOverview" class="mt-3 grid gap-3"></div>
        </aside>
      </main>

      <footer class="max-w-6xl mx-auto mt-12 text-center text-sm text-slate-500">© LiquidGen — Demo landing page (static)</footer>
    </div>

    <script>
      function fmt(v){ return v>=1?Number(v).toLocaleString(undefined,{maximumFractionDigits:2}):v.toFixed(6); }

      function compute(){
        const lockedValue = Number(document.getElementById('lockedValue').value) || 0;
        const apr = Number(document.getElementById('apr').value) || 0;
        const buybacksPerMonth = Number(document.getElementById('buybacksPerMonth').value) || 1;
        const buybackAllocationPct = Number(document.getElementById('buybackAllocationPct').value) || 0;
        const platformFeePct = Number(document.getElementById('platformFeePct').value) || 0;
        const allocA = Number(document.getElementById('allocA').value) || 0;
        const allocB = Number(document.getElementById('allocB').value) || 0;
        const allocC = Number(document.getElementById('allocC').value) || 0;

        const annualYield = lockedValue * (apr/100);
        const monthlyYield = annualYield/12;
        const yieldAfterPlatformFee = monthlyYield * (1 - platformFeePct);
        const buybackPool = yieldAfterPlatformFee * buybackAllocationPct;
        const perBuyback = buybackPool / Math.max(1,buybacksPerMonth);
        const allocSum = Math.max(1, allocA+allocB+allocC);
        const alloc = { A: (allocA/allocSum)*buybackPool, B:(allocB/allocSum)*buybackPool, C:(allocC/allocSum)*buybackPool };

        return { lockedValue, apr, buybacksPerMonth, buybackAllocationPct, platformFeePct, annualYield, monthlyYield, yieldAfterPlatformFee, buybackPool, perBuyback, alloc };
      }

      function render(){
        const r = compute();
        document.getElementById('buybackAllocLabel').textContent = Math.round(r.buybackAllocationPct*100)+'%';
        document.getElementById('platformFeeLabel').textContent = (r.platformFeePct*100).toFixed(2)+'%';

        const results = document.getElementById('results');
        results.innerHTML = `
          <div>Annual yield: <strong>$${fmt(r.annualYield)}</strong></div>
          <div>Monthly yield: <strong>$${fmt(r.monthlyYield)}</strong></div>
          <div>Yield after platform fee: <strong>$${fmt(r.yieldAfterPlatformFee)}</strong></div>
          <div>Buyback pool / month: <strong>$${fmt(r.buybackPool)}</strong></div>
          <div>Average per buyback: <strong>$${fmt(r.perBuyback)}</strong></div>
          <div class="mt-2">Allocations — A: <strong>$${fmt(r.alloc.A)}</strong>, B: <strong>$${fmt(r.alloc.B)}</strong>, C: <strong>$${fmt(r.alloc.C)}</strong></div>
        `;

        // Quick overview
        document.getElementById('quickOverview').innerHTML = `
          <div class="p-3 bg-white rounded-lg border"><div class="text-xs text-slate-500">Locked value</div><div class="text-xl font-semibold">$${fmt(r.lockedValue)}</div></div>
          <div class="p-3 bg-white rounded-lg border"><div class="text-xs text-slate-500">Avg APR</div><div class="text-xl font-semibold">${fmt(r.apr)}%</div></div>
          <div class="p-3 bg-white rounded-lg border"><div class="text-xs text-slate-500">Monthly buyback pool</div><div class="text-xl font-semibold">$${fmt(r.buybackPool)}</div></div>
        `;

        // Simulate buybacks
        const days = 30; const arr = []; let remaining = r.buybackPool;
        for(let i=0;i<days;i++){
          const prob = r.buybacksPerMonth/30;
          const happens = Math.random() < prob;
          let amt = 0;
          if(happens){ const jitter=1+(Math.random()-0.5)*0.6; amt = Math.max(0, Math.min(remaining, r.perBuyback*jitter)); remaining -= amt; }
          arr.push({day:i+1, amount: Math.round(amt)});
        }
        if(remaining>0) arr[arr.length-1].amount += Math.round(remaining);

        // Draw simple SVG chart
        const chartWrap = document.getElementById('chartWrap');
        const max = Math.max(1, ...arr.map(d=>d.amount));
        const w = 800, h = 200, pad = 20;
        const points = arr.map((d,i)=>{ const x = pad + (i/(arr.length-1))*(w-pad*2); const y = h-pad - (d.amount/max)*(h-pad*2); return `${x},${y}`; }).join(' ');
        chartWrap.innerHTML = `<svg viewBox="0 0 ${w} ${h}" preserveAspectRatio="none" class="w-full h-52"><polyline points="${points}" fill="none" stroke="#3182CE" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></svg>`;
      }

      // Wire inputs
      ['lockedValue','apr','buybacksPerMonth','buybackAllocationPct','platformFeePct','allocA','allocB','allocC'].forEach(id=>{
        const el = document.getElementById(id);
        if(el) el.addEventListener('input', render);
      });

      document.getElementById('copyBtn').addEventListener('click', ()=>{
        const r = compute();
        const text = `LiquidGen summary:\nLocked: $${fmt(r.lockedValue)}\nAPR: ${fmt(r.apr)}%\nMonthly yield: $${fmt(r.monthlyYield)}\nBuyback pool/month: $${fmt(r.buybackPool)}\nPer buyback (avg): $${fmt(r.perBuyback)}`;
        if(navigator.clipboard && navigator.clipboard.writeText) navigator.clipboard.writeText(text).then(()=>alert('Summary copied')).catch(()=>prompt('Copy summary', text));
        else prompt('Copy summary', text);
      });

      render();
    </script>
  </body>
</html>
